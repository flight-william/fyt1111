<nav class="nav-floating px-6 md:px-10 py-5 flex items-center justify-between" style="padding-right: max(1.5rem, env(safe-area-inset-right));">
  <div class="flex items-center">
    <a href="#cover" class="scroll-top-link"><img src="/images/logo-fytbet.webp" alt="FYTBET" class="h-5 w-auto opacity-50 hover:opacity-70 transition-opacity duration-300"></a>
  </div>
  <div class="lang-switcher mr-4{{ if not .IsHome }} hidden{{ end }}">
    {{ $currentLang := .Language.Lang }}
    <button class="lang-globe" aria-label="Switch language" aria-expanded="false">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"/>
        <path d="M2 12h20"/>
        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
      </svg>
    </button>
    <div class="lang-dropdown" role="menu">
      {{- $langs := slice
        (dict "code" "zh"  "label" "中文"       "fallback" "/")
        (dict "code" "yue" "label" "粵語"       "fallback" "/yue/")
        (dict "code" "en"  "label" "English"    "fallback" "/en/")
        (dict "code" "vi"  "label" "Tiếng Việt" "fallback" "/vi/")
        (dict "code" "th"  "label" "ไทย"        "fallback" "/th/")
        (dict "code" "id"  "label" "Indonesia"  "fallback" "/id/")
      -}}
      {{- range $lang := $langs -}}
        {{- $link := $lang.fallback -}}
        {{- range $.AllTranslations }}{{ if eq .Language.Lang $lang.code }}{{ $link = .RelPermalink }}{{ end }}{{ end -}}
        {{- if eq $currentLang $lang.code }}
      <span class="lang-item active" role="menuitem">{{ $lang.label }}</span>
        {{- else }}
      <a href="{{ $link }}" class="lang-item" role="menuitem" data-lang-toggle="{{ $lang.code }}">{{ $lang.label }}</a>
        {{- end -}}
      {{- end }}
    </div>
  </div>
  <script>
  (function(){
    const sw=document.querySelector('.lang-switcher');if(!sw)return;
    const btn=sw.querySelector('.lang-globe'),dd=sw.querySelector('.lang-dropdown');
    btn.addEventListener('click',function(e){e.stopPropagation();const open=dd.classList.toggle('open');btn.setAttribute('aria-expanded',open)});
    document.addEventListener('click',function(){dd.classList.remove('open');btn.setAttribute('aria-expanded','false')});
    dd.addEventListener('click',function(e){e.stopPropagation()});
    document.addEventListener('keydown',function(e){if(e.key==='Escape'){dd.classList.remove('open');btn.setAttribute('aria-expanded','false')}});
  })();
  </script>
</nav>
