(function(){"use strict";var e,n,s,o,i,a,r,c,l,d,u,h,f,m=document.querySelectorAll(".reveal");"IntersectionObserver"in window?(d=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(e.target.classList.add("visible"),d.unobserve(e.target))})},{threshold:.1}),m.forEach(function(e){d.observe(e)})):m.forEach(function(e){e.classList.add("visible")}),l=document.querySelector(".progress-bar"),l&&window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-window.innerHeight,n=e>0?t/e*100:0;l.style.width=n+"%"},{passive:!0}),o=document.querySelector(".nav-floating"),o&&window.addEventListener("scroll",function(){window.pageYOffset>80?o.classList.add("scrolled"):o.classList.remove("scrolled")},{passive:!0}),c=document.querySelectorAll("[data-section]"),r=document.querySelectorAll(".section-dot"),c.length&&r.length&&"IntersectionObserver"in window&&(u=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t,n=e.target.getAttribute("data-section");r.forEach(function(e){e.classList.remove("active")}),t=document.querySelector('.section-dot[data-dot="'+n+'"]'),t&&t.classList.add("active")}})},{threshold:.3}),c.forEach(function(e){u.observe(e)})),document.querySelectorAll(".video-container").forEach(function(e){e.addEventListener("click",function(){var t=e.querySelector("video");t&&(t.paused?(t.play(),e.classList.add("playing")):(t.pause(),e.classList.remove("playing")))})}),a=document.querySelectorAll(".auto-video-section video"),a.length&&"IntersectionObserver"in window&&(h=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting?e.target.play():e.target.pause()})},{threshold:.3}),a.forEach(function(e){h.observe(e)})),e=Array.from(document.querySelectorAll(".page, .cover")),n=e.length,s=document.querySelector(".current-page"),i=document.querySelector(".total-pages"),i&&(i.textContent=n),s&&"IntersectionObserver"in window&&(f=new IntersectionObserver(function(t){t.forEach(function(t){if(t.isIntersecting){var n=e.indexOf(t.target);n>=0&&s&&(s.textContent=n+1)}})},{threshold:.5}),e.forEach(function(e){f.observe(e)}));function p(){var s=window.innerHeight,t=0,n=1/0;return e.forEach(function(e,o){var i=e.getBoundingClientRect(),r=i.top+i.height/2,a=Math.abs(r-s/2);a<n&&(n=a,t=o)}),t}function t(t){t<0&&(t=0),t>=n&&(t=n-1),e[t].scrollIntoView({behavior:"smooth",block:"start"})}document.addEventListener("keydown",function(e){if(e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||e.target.isContentEditable)return;var o=p(),s=!1;switch(e.key){case"ArrowDown":case"j":t(o+1),s=!0;break;case"ArrowUp":case"k":t(o-1),s=!0;break;case"Home":t(0),s=!0;break;case"End":t(n-1),s=!0;break;case"Escape":t(0),s=!0;break}s&&e.preventDefault()})})()